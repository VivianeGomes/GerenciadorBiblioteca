name: PR Autom√°tica com gh CLI

on:
  push:
    branches:
      - "feature/**"

jobs:
  criar-pr:
    runs-on: ubuntu-latest

    steps:
      - name: üîÑ Checkout do reposit√≥rio
        uses: actions/checkout@v4

      - name: üõ†Ô∏è Verifica se o GitHub CLI est√° instalado
        run: |
          if ! command -v gh &> /dev/null; then
            echo "GitHub CLI n√£o encontrado. Instalando..."
            sudo apt update && sudo apt install gh -y
          else
            echo "GitHub CLI j√° est√° instalado."
          fi

      - name: ‚ú® Cria Pull Request automaticamente
        run: |
          gh pr create \
            --title "‚ú® PR autom√°tica: ${{ github.ref_name }}" \
            --body "Essa PR foi gerada automaticamente ap√≥s push na branch `${{ github.ref_name }}`." \
            --base main \
            --head ${{ github.ref_name }}
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
